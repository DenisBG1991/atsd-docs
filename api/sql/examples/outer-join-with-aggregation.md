## Outer Join with Aggregation


> Query

```sql
SELECT entity, time, AVG(cpu_busy.value), AVG(disk_used.value)
 FROM cpu_busy
 OUTER JOIN disk_used
 WHERE time > now - 1 * hour
 GROUP BY entity, period(15 minute)
```

> Response

```json
{
    "columns": [
        {
            "name": "entity",
            "metric": "cpu_busy",
            "label": "entity",
            "type": "STRING",
            "numeric": false
        },
        {
            "name": "time",
            "metric": "cpu_busy",
            "label": "time",
            "type": "LONG",
            "numeric": true
        },
        {
            "name": "AVG(cpu_busy.value)",
            "metric": "cpu_busy",
            "label": "AVG(cpu_busy.value)",
            "type": "FLOAT",
            "numeric": true
        },
        {
            "name": "AVG(disk_used.value)",
            "metric": "disk_used",
            "label": "AVG(disk_used.value)",
            "type": "FLOAT",
            "numeric": true
        }
    ],
    "rows": [
        [
            "awsswgvml001",
            1447402500000,
            1.396,
            31993319.733333334
        ],
        [
            "awsswgvml001",
            1447403400000,
            5.485,
            31993651.82222222
        ],
        [
            "awsswgvml001",
            1447404300000,
            7.332,
            31993992.266666666
        ]
    ]
}
```

**SQL Console Response**

| entity       | time          | AVG(cpu_busy.value) | AVG(disk_used.value) | 
|--------------|---------------|---------------------|----------------------| 
| awsswgvml001 | 1447402500000 | 1.28                | 3.199332495238095E7  | 
| awsswgvml001 | 1447403400000 | 5.485               | 3.199365182222222E7  | 
| awsswgvml001 | 1447404300000 | 7.332               | 3.1993992266666666E7 | 
| awsswgvml001 | 1447405200000 | 28.466666666666665  | 3.20101648E7         | 
| awsswgvml001 | 1447406100000 | 1.2                 | 3.2004019777777776E7 | 
| nurswgvml003 | 1447402500000 | 2.987037037037037   | 4.801549866666667E7  | 
| nurswgvml003 | 1447403400000 | 2.1580357142857145  | 4.801548062222222E7  | 
| nurswgvml003 | 1447404300000 | 3.0348214285714286  | 4.80155496E7         | 
| nurswgvml003 | 1447405200000 | 8.422105263157892   | 4.80155768E7         | 
| nurswgvml003 | 1447406100000 | 2.734137931034483   | 4.801559333333333E7  | 
| nurswgvml006 | 1447402500000 | 16.794615384615387  | 2.9060381172413792E7 | 
| nurswgvml006 | 1447403400000 | 21.149649122807016  | 2.9056498733333334E7 | 
| nurswgvml006 | 1447404300000 | 18.680714285714284  | 2.9060813933333334E7 | 
| nurswgvml006 | 1447405200000 | 25.231785714285714  | 2.9066732745762713E7 | 
| nurswgvml006 | 1447406100000 | 8.349655172413794   | 2.90752549375E7      | 
| nurswgvml007 | 1447402500000 | 17.73037037037037   | 7.403412664285715E7  | 
| nurswgvml007 | 1447403400000 | 14.423035714285714  | 7.403452726666667E7  | 
| nurswgvml007 | 1447404300000 | 17.5325             | 7.403496163333334E7  | 
| nurswgvml007 | 1447405200000 | 40.00928571428571   | 7.40353264E7         | 
| nurswgvml007 | 1447406100000 | 22.875333333333334  | 7.403567283870968E7  | 
| nurswgvml010 | 1447402500000 | 2.4629629629629632  | 1.644483957142857E7  | 
| nurswgvml010 | 1447403400000 | 3.9226785714285715  | 1.644485875862069E7  | 
| nurswgvml010 | 1447404300000 | 11.564649122807014  | 1.6438349350649351E7 | 
| nurswgvml010 | 1447405200000 | 12.874743589743579  | 1.6592446566666666E7 | 
| nurswgvml010 | 1447406100000 | 3.013793103448276   | 1.6646093125E7       | 
| nurswgvml011 | 1447402500000 | 2.592962962962963   | 4.954640542528735E7  | 
| nurswgvml011 | 1447403400000 | 2.0717857142857143  | 4.954648657777778E7  | 
| nurswgvml011 | 1447404300000 | 2.1269642857142856  | 4.954651208888889E7  | 
| nurswgvml011 | 1447405200000 | 9.215357142857142   | 4.954641938983051E7  | 
| nurswgvml011 | 1447406100000 | 1.9589655172413794  | 4.954655225E7        | 
| nurswgvml102 | 1447402500000 | 0.8840740740740741  | 4.761813370114943E7  | 
| nurswgvml102 | 1447403400000 | 0.6244642857142857  | 4.7618148755555555E7 | 
| nurswgvml102 | 1447404300000 | 0.8946428571428571  | 4.7618172222222224E7 | 
| nurswgvml102 | 1447405200000 | 1.0666071428571429  | 4.7618203777777776E7 | 
| nurswgvml102 | 1447406100000 | 0.8646666666666667  | 4.761823621505377E7  | 
